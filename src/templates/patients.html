{% extends "layout.html" %}
{% block title %}Lista de Pacientes{% endblock %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Pacientes</h1>
    <a href="{{ url_for('system.add_patient') }}" class="btn btn-success">
      + Adicionar Novo Paciente
    </a>
  </div>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Nome Completo</th>
        <th>Telefone</th>
        <th>Email</th>
        <th>Data de Registo</th>
        <th>Ações</th> <!-- NOVA COLUNA -->
      </tr>
    </thead>
    <tbody>
      {% for patient in patients %}
      <tr>
        <td>{{ patient.full_name }}</td>
        <td>{{ patient.phone_number }}</td>
        <td>{{ patient.email or 'N/A' }}</td>
        <td>{{ patient.created_at.strftime('%d/%m/%Y') }}</td>
        <td>
          <!-- NOVOS BOTÕES -->
          <a href="{{ url_for('system.edit_patient', patient_id=patient.id) }}" class="btn btn-primary btn-sm">Editar</a>
          <a href="{{ url_for('system.delete_patient', patient_id=patient.id) }}" class="btn btn-danger btn-sm" onclick="return confirm('Tem a certeza que quer apagar este paciente? Esta ação não pode ser desfeita.');">Apagar</a>
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="5" class="text-center">Nenhum paciente registado ainda.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
